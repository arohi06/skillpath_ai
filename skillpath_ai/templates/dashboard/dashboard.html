{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>

<body>
  
  <div class="dashboard" id="welcomePage">
    <h2> Welcome to the Pixie Forest! </h2>
    <hr>
    <h2></h2>
    <h3>In this magical land of pixels, we'll work on easing your mind from the overwhelming question that might be
      weighing upon your mind : "How do I upskill myself?"
      <br>
      But you needn't worry, stay with us through this short snippet of what might be your journey ahead
      <br>
      All the very best :)
    </h3>


    {% if True%}
    <div class="button">
      <button class="button1" onclick="openLevel('level_1')">
        Ready to Level Up?
      </button>
    </div>
    {% endif %}
    <br><br>
     <div class="modal-buttons">

    <a href="{% url 'skill_form:form' %}"
   class="icon-btn tooltip"
   aria-label="Edit Skills">

  
  <svg xmlns="http://www.w3.org/2000/svg"
       fill="none"
       viewBox="0 0 24 24"
       stroke-width="1.5"
       stroke="currentColor"
       class="icon">
    <path stroke-linecap="round"
          stroke-linejoin="round"
          d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l9.932-9.931z" />
  </svg>

  <span class="tooltip-text">Edit Skills</span>
</a>

    
    <a href="{% url 'login_user:login' %}" class="icon-btn tooltip" aria-label="Logout">
     
  
  <svg xmlns="http://www.w3.org/2000/svg" 
       fill="none" 
       viewBox="0 0 24 24" 
       stroke-width="2" 
       stroke="currentColor" 
       class="icon">
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6A2.25 2.25 0 005.25 5.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15" />
    <path stroke-linecap="round" stroke-linejoin="round"
      d="M12 9l3 3m0 0l-3 3m3-3H3" />
  </svg>

  <span class="tooltip-text">Logout</span>


    </a>

  </div>





  {% if roadmap and not roadmap.error %}
  {% for level, data in roadmap.items %}
  <div id="{{ level }}Modal" class="pixel-modal hidden">

    <div class="pixel-modal-content">

      <h2 id="level-head">
        LEVEL {{ forloop.counter }}
      </h2>

      <h2>{{ data.title }}</h2>
      <h3>{{ data.goal }}</h3>

      {% if data.skills %}
      <div>
        <strong>Skills You'll Learn:</strong>
        <ul>
          {% for skill in data.skills %}
          <li>{{ skill }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% if data.tasks %}
      <div>
        <strong>Tasks:</strong>
        <ul>
          {% for task in data.tasks %}
          <li>{{ task }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% if data.project %}
      <p><strong>Project:</strong><br>{{ data.project }}</p>
      {% endif %}

      {% if data.resources %}
      <div>
        <strong>Resources:</strong>
        <ul>
          {% for resource in data.resources %}
          <li>{{ resource }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% if data.outcome %}
      <p><strong>Outcome:</strong><br>{{ data.outcome }}</p>
      {% endif %}


      
      <div class="modal-buttons">

        
        {% if forloop.first %}
        <button class="button1" onclick="goToWelcome()">Back</button>
        {% endif %}

        
        {% if not forloop.first %}
        <button class="button1" onclick="openLevel('level_{{ forloop.counter|add:-1 }}')">
          Back
        </button>
        {% endif %}


        
        {% if not forloop.last %}
        <button class="button1" onclick="openLevel('level_{{ forloop.counter|add:1 }}')">
          Ready for more?
        </button>
        {% endif %}

        

        {% if forloop.last %}
        <button class="button1" onclick="goToWelcome()">Welcome page</button>
        {% endif %}

      </div>

    </div>
  </div>
  {% endfor %}
  {% endif %}

  
  <script>
    function openLevel(levelId) {
      document.querySelectorAll('.pixel-modal')
        .forEach(m => m.classList.add('hidden'));

      const modal = document.getElementById(levelId + 'Modal');
      if (modal) modal.classList.remove('hidden');
    }

    function goToWelcome() {
      document.querySelectorAll('.pixel-modal')
        .forEach(m => m.classList.add('hidden'));
    }
  </script>

</body>

</html>